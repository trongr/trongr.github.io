<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Programming</title>
<link rel="stylesheet" href="../css/global.css">

<link rel="stylesheet" href="../css/obsidian.min.css">
<script src="../js/highlight.min.js"></script>

<!-- this config must be before MathJax.js: -->
<script src="../js/mathjax.config.js"></script>
<script src="../js/MathJax/MathJax.js"></script>
<!-- <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js"></script> -->

<script src="../js/jquery-3.1.0.min.js"></script>
<script src="../js/smartquotes.js"></script>
<script src="../js/global.js"></script>

</head>
<body>

<div id="content">

<h1>Programming</h1>

<div class="epigraph">
     <div class="quote">
        <img src="images/tumblr_myo2hr97No1skltbdo1_500.gif">
     </div><hr><div class="author">The Matrix</div>
</div>

<h1>Python</h1>

<h3>Random</h3>

<p>
    Randomly shuffles an array <code data-content='a'></code> in place:
</p>

<pre><code data-content='np.random.shuffle(a)'></code></pre>

<p>
    Choosing $k$ numbers from $0:n-1$ without replacement:
</p>

<pre><code data-content='a = np.random.choice(n, k, replace=False)'></code></pre>

<h3>Generating test arrays</h3>

<pre><code class="lang-py" data-content='a = np.arange(12).reshape(3, 4)
a = np.ones((2, 10))
a = np.zeros((2, 10))'></code></pre>

<h3>Array shapes</h3>

<p>
    Reshaping an array <code data-content='a'></code> of dimension $10
    \times 20$ to one of dimension $2 \times 5 \times 2 \times 10$ and
    back:
</p>

<pre><code data-content='a = np.reshape(a, (2, 5, 2, 10))
a = np.reshape(a, (10, -1)) # omitted dimension 20 is inferred'></code></pre>

<h3>Transforming arrays</h3>

<p>
    Tranposing a vector. First you need to convert it into an array by
    adding a new axis:
</p>

<pre><code data-content='>>> b
array([0, 2, 1, 3, 1, 2])
>>> b[None].T
array([[0],
       [2],
       [1],
       [3],
       [1],
       [2]])'></code></pre>

<h3>Extending arrays</h3>

<p>
    Concatenating arrays vertically and horizontally:
</p>

<pre><code data-content='>>> a = np.arange(6).reshape(2, 3)
>>> a
array([[0, 1, 2],
       [3, 4, 5]])
>>> np.concatenate([a, a], axis=0)
array([[0, 1, 2],
       [3, 4, 5],
       [0, 1, 2],
       [3, 4, 5]])
>>> np.concatenate([a, a], axis=1)
array([[0, 1, 2, 0, 1, 2],
       [3, 4, 5, 3, 4, 5]])'></code></pre>

<p>
    E.g. prepending bias units to <code data-content='a'></code>:
</p>

<pre><code data-content='>>> b = np.ones((a.shape[0], 1))
>>> b
array([[ 1.],
       [ 1.]])
>>> np.concatenate([b, a], axis=1)
array([[ 1.,  0.,  1.,  2.],
       [ 1.,  3.,  4.,  5.]])'></code></pre>

<h3>Array indexing</h3>

<p>
    <b>Indicator function.</b> Selecting elements of a vector based on
    a condition:
</p>

<pre><code data-content='>>> b
array([0, 1, 2, 3, 4, 5])
>>> np.where(b > 2, 1, 0)
array([0, 0, 0, 1, 1, 1])'></code></pre>

<p>
    Given a matrix <code data-content='a'></code> and a
    vector <code data-content='b'></code> of indices to an entry in each
    row of <code data-content='a'></code>, to find those entries:
</p>

<pre><code data-content='>>> a
array([[ 0,  1,  2,  3],
       [ 4,  5,  6,  7],
       [ 8,  9, 10, 11],
       [12, 13, 14, 15],
       [16, 17, 18, 19],
       [20, 21, 22, 23]])
>>> b
array([0, 2, 1, 3, 1, 2])
>>> np.choose(b, a.T)
array([ 0,  6,  9, 15, 17, 22])'></code></pre>

<p>
    Alternatively, a better solution is:
</p>

<pre><code data-content='>>> a
array([[ 0,  1,  2,  3],
       [ 4,  5,  6,  7],
       [ 8,  9, 10, 11],
       [12, 13, 14, 15],
       [16, 17, 18, 19],
       [20, 21, 22, 23]])
>>> cols
[0, 2, 1, 3, 1, 2]
>>> rows = np.arange(a.shape[0])
>>> a[rows, cols]
array([ 0,  6,  9, 15, 17, 22])'></code></pre>

<p>
    Doing it this way also lets you assign those entries:
</p>

<pre><code data-content='>>> a[rows, cols] = 0
>>> a
array([[ 0,  1,  2,  3],
       [ 4,  5,  0,  7],
       [ 8,  0, 10, 11],
       [12, 13, 14,  0],
       [16,  0, 18, 19],
       [20, 21,  0, 23]])'></code></pre>

<h3>Statistics</h3>

<p>
    Creating an array <code data-content='a'></code> of
    size <code data-content='2x3x4'></code> and calculating its mean
    along <code data-content='axis=0'></code>. The result is an array of
    size <code data-content='3x4'></code>, whose entries are the mean
    along the missing axis:
</p>

<pre><code data-content='>>> a = np.arange(24).reshape(2, 3, 4)
>>> a
array([[[ 0,  1,  2,  3],
        [ 4,  5,  6,  7],
        [ 8,  9, 10, 11]],

       [[12, 13, 14, 15],
        [16, 17, 18, 19],
        [20, 21, 22, 23]]])
>>> np.mean(a, axis=0)
array([[  6.,   7.,   8.,   9.],
       [ 10.,  11.,  12.,  13.],
       [ 14.,  15.,  16.,  17.]])'></code></pre>

<h3>python-nmap</h3>

<pre><code>pip install --user python-nmap</code></pre>

<h1>C</h1>

<h3>Hello World</h3>

<p>
    hello.c:
    <pre><code data-content='#include <stdio.h>

int main(){
    printf("Hello World\n");
    return 0;
}'></code></pre>

</p>

<h3>Compilation</h3>

<p>
    Compile with:
</p>

<pre><code>cc -std=c99 hello.c</code></pre>

<h3>Control flow: Fibonacci with while loop</h3>

<p>
    Be not seduced by the elegance of recursive programs. Unlike your
    imagination, computer memory has limits!
</p>

<pre><code data-content='#include <stdio.h>

#define MAX_N 32

main(){
    int n = 0;
    int f0 = 0;
    int f1 = 1;
    int tmp;
    while (n < MAX_N){
        printf("%3d %10d\n", n, f0);
        tmp = f1;
        f1 = f0 + f1;
        f0 = tmp;
        n++;
    }
}
'></code></pre>

<h3>Get and put char</h3>

<pre><code data-content='#include <stdio.h>

main(){
    int c;
    while ((c = getchar()) != EOF){
        putchar(c);
    }
}
'></code></pre>

<h3>Example. Counting lines, words, and chars</h3>

<pre><code>#include &lt;stdio.h&gt;

#define IN  1                   /* inside a word */
#define OUT 0                   /* outside a word */

main(){
    int c, nl, nw, nc, state;   /* num chars, words, and lines */
    nc = nw = nl = 0;
    state = OUT;
    printf("Type something or press ^D to quit\n");
    printf("NOTE. ^C is different from ^D\n");
    while ((c = getchar()) != EOF){
        if (c == '\n'){
            nl++;
        }
        if (c == ' ' || c == '\n' || c == '\t'){
            state = OUT;
        } else if (state == OUT){
            state = IN;
            nw++;
        }
        nc++;
    }
    printf("%d %d %d\n", nc, nl, nw);
}</code></pre>

<p>
    NOTE. ^C is kill code, ^D is EOF.
</p>

<h3>Declaring and Defining Functions</h3>

<pre><code>int pow(int base, int exp);

/* exp must be int >= 0 */
int pow(int base, int exp){
    int n = 1;
    for (int i = 0; i < exp; i++){
        n = n * base;
    }
    return n;
}</code></pre>

<h1>Reference</h1>

<ol>
<li>The C Programming Language by Kernighan and Ritchie.</li>
<li>Everything else from the web.</li>
</ol>

</div>
</body>
</html>
